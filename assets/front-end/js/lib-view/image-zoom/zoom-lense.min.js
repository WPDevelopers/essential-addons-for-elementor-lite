!function(e){e.fn.eaelZoomLense=function(t){let o=e.extend({lensWidth:100,lensHeight:100,borderRadius:"50%",lensBorder:"1px solid #aaa",resultBorder:"1px solid #aaa",gap:10,autoResize:!1,minLensSize:40,maxLensSize:300,step:10,zoomId:t.zoomId?"zoom_"+t.zoomId:"zoom"},t);return e(this).on("mouseenter touchstart mousemove touchmove",function(t){let n=e(this),i=o.zoomId;if(e(".eael-lens-"+i).length||e(".eael-result-"+i).length)return;let s=o.lensWidth,a=o.lensHeight,r=e("<div>",{class:"eael-lens-"+i,css:{position:"absolute",pointerEvents:"none",borderRadius:o.borderRadius,border:o.lensBorder,backgroundColor:"rgba(255,255,255,0.3)",zIndex:999}}).appendTo("body"),l=e("<div>",{class:"eael-result-"+i,css:{position:"absolute",border:o.resultBorder,backgroundRepeat:"no-repeat",zIndex:998}}).appendTo("body"),u=n.offset();function d(e){let t=e.originalEvent.touches?e.originalEvent.touches[0]:e,o=t.pageX,i=t.pageY,u=n.offset(),d=o-s/2,h=i-a/2,p=u.left+n.outerWidth()-s,c=u.top+n.outerHeight()-a;d=Math.max(u.left,Math.min(d,p)),h=Math.max(u.top,Math.min(h,c)),r.css({width:s,height:a,top:h,left:d,display:"block"});let f=l.width()/s,m=l.height()/a;l.css({display:"block",backgroundPosition:`-${(d-u.left)*f}px -${(h-u.top)*m}px`})}l.css({width:n.outerWidth(),height:n.outerHeight(),top:u.top,left:u.left+n.outerWidth()+o.gap,backgroundImage:`url(${n.attr("src")})`,backgroundSize:`${n.outerWidth()*(n.outerWidth()/s)}px ${n.outerHeight()*(n.outerHeight()/a)}px`}),o.autoResize&&e(window).on("wheel."+i,function(e){if(!r.is(":visible"))return;e.preventDefault();let t=e.originalEvent.deltaY,i=t>0?1:-1,u=Math.max(o.minLensSize,Math.min(o.maxLensSize,s-i*o.step)),d=Math.max(o.minLensSize,Math.min(o.maxLensSize,a-i*o.step)),h=(s-u)/2,p=(a-d)/2;s=u,a=d;let c=r.offset();r.css({width:s,height:a,top:c.top+p,left:c.left+h});let f=l.width()/s,m=l.height()/a,g=n.offset();l.css({backgroundSize:`${n.outerWidth()*f}px ${n.outerHeight()*m}px`,backgroundPosition:`-${(r.offset().left-g.left)*f}px -${(r.offset().top-g.top)*m}px`})}),e(document).on("mousemove."+i+" touchmove."+i,d),n.on("mouseleave."+i+" touchend."+i,function(){r.remove(),l.remove(),e(document).off("mousemove."+i+" touchmove."+i),e(window).off("wheel."+i),n.off("mouseleave."+i+" touchend."+i)}),d(t)}),this},e.fn.eaelMagnify=function(t){let o=e.extend({lensSize:200,zoom:2,lensBorder:"2px solid #fff"},t);return this.each(function(){let t=e(this),n=null,i=o.zoom,s=!1;function a(){if(s)return;s=!0;let a=t[0].naturalWidth,r=t[0].naturalHeight;function l(e){if(!n)return;let o=t.offset(),s=t.width(),l=t.height(),u=e.pageX-o.left,d=e.pageY-o.top;if(u<0||d<0||u>s||d>l){n.css("opacity",0);return}let h=a*i,p=r*i,c=u/s*a*i-n.width()/2,f=d/l*r*i-n.height()/2;n.css({left:`${e.pageX-n.width()/2}px`,top:`${e.pageY-n.height()/2}px`,backgroundPosition:`-${c}px -${f}px`,backgroundSize:`${h}px ${p}px`,opacity:1})}t.on("mouseenter touchstart mousemove touchmove",function(){n||(n=e('<div class="eael-magnify-lens"></div>').css({width:o.lensSize,height:o.lensSize,border:o.lensBorder,backgroundImage:`url(${t.attr("src")})`,backgroundRepeat:"no-repeat",pointerEvents:"none",opacity:0,boxShadow:"0 5px 10px rgba(0, 0, 0, 0.2)",borderRadius:"50%",transition:"opacity 0.2s",position:"absolute",zIndex:9999}),e("body").append(n))}),t.on("mousemove touchmove",l),t.on("mouseleave touchend",function(){n&&(n.css("opacity",0),setTimeout(()=>{n?.remove(),n=null},200))}),t.on("wheel",function(e){if(!n)return;e.preventDefault();let t=e.originalEvent.deltaY||e.originalEvent.wheelDelta;i=t>0?Math.max(1,i-.1):Math.min(5,i+.1),l(e)})}t[0].complete&&t[0].naturalWidth?a():t.one("load",a)})}}(jQuery);